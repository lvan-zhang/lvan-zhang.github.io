(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{368:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",[s._v("前言\nSSH(远程连接工具)连接原理：ssh服务是一个守护进程(demon)，系统后台监听客户端的连接，ssh服务端的进程名为sshd,负责实时监听客户端的请求(IP 22端口)，包括公共秘钥等交换等信息。\nssh服务端由2部分组成： openssh(提供ssh服务)    openssl(提供加密的程序)\nssh的客户端可以用 XSHELL，Securecrt, Mobaxterm等工具进行连接...")])]),s._v(" "),n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),n("p",[s._v("SSH(远程连接工具)连接原理：ssh服务是一个守护进程(demon)，系统后台监听客户端的连接，ssh服务端的进程名为sshd,负责实时监听客户端的请求(IP 22端口)，包括公共秘钥等交换等信息。")]),s._v(" "),n("p",[s._v("ssh服务端由2部分组成： openssh(提供ssh服务)    openssl(提供加密的程序)")]),s._v(" "),n("p",[s._v("ssh的客户端可以用 XSHELL，Securecrt, Mobaxterm等工具进行连接")]),s._v(" "),n("h2",{attrs:{id:"ssh的工作机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh的工作机制"}},[s._v("#")]),s._v(" SSH的工作机制")]),s._v(" "),n("p",[s._v("服务器启动的时候自己产生一个密钥(768bit公钥)，本地的ssh客户端发送连接请求到ssh服务器，服务器检查连接点客户端发送的数据和IP地址，确认合法后发送密钥(768bits)给客户端，此时客户端将本地私钥(256bit)和服务器的公钥(768bit)结合成密钥对key(1024bit),发回给服务器端，建立连接通过key-pair数据传输。")]),s._v(" "),n("h2",{attrs:{id:"ssh的加密技术"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh的加密技术"}},[s._v("#")]),s._v(" SSH的加密技术")]),s._v(" "),n("p",[s._v("加密技术：传输过程，数据加密。"),n("br"),s._v("\n1.SSH1没有对客户端的秘钥进行校验，很容易被植入恶意代码\n2.SSH2增加了一个确认联机正确性的Diffe_Hellman机制，每次数据的传输，Server都会检查数据来源的正确性，避免黑客入侵。"),n("br"),s._v("\nSSH2支持RSA和DSA密钥"),n("br"),s._v("\nDSA:digital signature Algorithm  数字签名\nRSA:既可以数字签名又可以加密")]),s._v(" "),n("h2",{attrs:{id:"ssh知识小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh知识小结"}},[s._v("#")]),s._v(" SSH知识小结")]),s._v(" "),n("p",[s._v("1.SSH是安全的加密协议，用于远程连接Linux服务器"),n("br"),s._v("\n2.SSH的默认端口是22，安全协议版本是SSH2"),n("br"),s._v("\n3.SSH服务器端主要包含2个服务功能SSH连接和SFTP服务器"),n("br"),s._v("\n4.SSH客户端包含ssh连接命令和远程拷贝scp命令等")]),s._v(" "),n("h2",{attrs:{id:"常见命令参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见命令参数"}},[s._v("#")]),s._v(" 常见命令参数")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("usage: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-1246AaCfgKkMNnqsTtVvXxYy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-b bind_address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c cipher_spec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-D "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bind_address:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-e escape_char"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-F configfile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-i identity_file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-L "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bind_address:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("port:host:hostport"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-l login_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-m mac_spec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-O ctl_cmd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-o option"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-R "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bind_address:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("port:host:hostport"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-S ctl_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-W host:port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-w local_tun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":remote_tun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("hostname "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"后台相关"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#后台相关"}},[s._v("#")]),s._v(" 后台相关")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询openssl软件")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa openssh openssl\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询sshd进程")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n        --"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/sbin/sshd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看ssh端口")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lntup "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("  \n    ss "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("效果同上，同下，好用"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ssh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("记住这个"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lnt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  查看22端口有没有开/ssh服务有没有开启\n    技巧： "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lnt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l --"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("只要大于2个就是ssh服务就是好的\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看ssh的秘钥目录")]),s._v("\n    ll /root/.ssh/known_hosts  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前用户家目录的.ssh目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh的配置文件")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/ssh/sshd_config   \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh服务的关闭")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd stop\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh服务的开启：")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd start\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh服务的重启")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd reload    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("停止进程后重启"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 推荐\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd restart   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("干掉进程后重启"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 不推荐\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh远程登录")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认利用当前宿主用户的用户名登录")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" omd@192.168.1.100  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 利用远程机的用户登录")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" omd@192.168.1.100  -o "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stricthostkeychecking")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首次登陆免输yes登录")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" omd@192.168.1.100 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls /home/omd"')]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前服务器A远程登录服务器B后执行某个命令")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" omd@192.168.1.100 -t "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh /home/omd/ftl.sh"')]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前服务器A远程登录服务器B后执行某个脚本")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);