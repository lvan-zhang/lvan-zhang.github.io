---
title: 小程序：使用花括号处理数据
date: 2019-12-11
tags:
  - 小程序
categories:
  - 小程序
---

:::tip
需求
我从后端拿到一个数据列表，循环渲染到页面上，但是需要单独对时间字段进行截取，后端传给我的时间是 2019-10-10 10:10:10 这种格式，我要转换成如图的格式：

但是在小程序的 dom 中直接调用截取字符串的函数是不会成功的，所以需要这样做
目录结构
├── pages
│ ├── master-speech
│ │ ├── master-speech.js
│ │ ├── mas...
:::

<!-- more -->

## 需求
我从后端拿到一个数据列表，循环渲染到页面上，但是需要单独对时间字段进行截取，后端传给我的时间是 `2019-10-10 10:10:10` 这种格式，我要转换成如图的格式：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20191211191041993.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzk3MjQzNw==,size_16,color_FFFFFF,t_70)
但是在小程序的 dom 中直接调用截取字符串的函数是不会成功的，所以需要这样做
## 目录结构
├── pages
│ ├── master-speech
│ │ ├── master-speech.js
│ │ ├── master-speech.wxml
├── utils
│ ├── util.wxs
├── app.js
## 核心代码
```html
<!--master-speech.wxml-->
<wxs module="utils" src="../../utils/util.wxs" />
<block wx:for="{{ oldSpeechList }}"
       wx:key="{{ index }}">
  <!--这一部分可以省略别看
  <view class="before-item"
        data-url="{{ item.post_link }}"
        bindtap="toSpeechDetail">
    <view class="item-left">
      <image class="item-left"
             src="{{ item.featured_images[0].path }}" />
    </view>
    <view class="item-right">
      <view class="right-title">{{ item.title }}</view>
      <view class="right-desc">
        {{ item.excerpt }}
      </view>
      <view class="right-eyes">
        <image class="icon-eyes"
              src="https://assets.dxycdn.com/gitrepo/gsk-tooth/images/index/icon-eyes-@2x.png" />
        <view class="eyes-num">{{ item.goods_integral }}</view>
        这一部分可以省略别看-->
        <!--重点在这里-->
        <view class="eyes-time">{{ utils.handleTime(item.updated_at) }}</view>
      </view>
    </view>
  </view>
</block>
```
```js
// util.wxs
var utils = {
  handleTime: function (data, num=10) {
    return data.slice(0, num)
  }
}
module.exports = {
  handleTime: utils.handleTime
}
```
