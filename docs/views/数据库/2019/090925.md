---
title: mongodb：brew安装mongodb报错
date: 2019-09-09
tags:
  - 数据库
categories:
  - 数据库
---

:::tip
问题
今天用 brew 来安装 mongodb 报错了。首先
brew install mongodb
提示 Error: No available formula with the name “mongodb”
具体是这样：

看了一下大致原因是在 homebrew 里找不到 mongodb 这个名字，mongodb 在 brew 核心库里面删除了，也可以
brew search mongodb...
:::

<!-- more -->

## 问题
今天用 brew 来安装 mongodb 报错了。首先
`brew install mongodb`
提示 Error: No available formula with the name "mongodb"
具体是这样：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190909185523787.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzk3MjQzNw==,size_16,color_FFFFFF,t_70)
看了一下大致原因是在 homebrew 里找不到 mongodb 这个名字，mongodb 在 brew 核心库里面删除了，也可以
`brew search mongodb` 一下，果然没有。
## 解决方案
为此我去 brew 的 github 留言了，得到的反馈是
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190909190628571.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzk3MjQzNw==,size_16,color_FFFFFF,t_70)
翻译一下：MongoDB不再是开源的了，并且已经从自制内核#43770中移除。要安装它，请检查MongoDB项目提供的选项:https://github.com/mongodb/homebrew-brew
于是我们访问一下：
根据这个github主页的提示，我们安装一下
`brew tap mongodb/brew`
`brew install mongodb-community@4.2`
安装成功啦~
#### 文件路径
配置文件：`/usr/local/etc/mongod.conf`
日志目录路径：`/usr/local/var/log/mongodb`
数据目录路径：`/usr/local/var/mongodb`
#### 启动&停止
`brew services start mongodb-community`
`brew services stop mongodb-community`
#### 手动启动 mongod
如果不需要或不需要后台MongoDB服务，可以运行：
`mongod --config /usr/local/etc/mongod.conf`
注意：如果不包括--config选项具有配置文件的路径，则MongoDB服务器没有默认配置文件或日志目录路径，并且将使用 /data/db.

关机mongod手动启动，请使用admin数据库和运行db.shutdownServer():
`mongo admin --eval "db.shutdownServer()"`
## 运行
1、首先我们创建一个数据库存储目录 /data/db：
`sudo mkdir -p /data/db`
>如果你的数据库目录不是/data/db，可以通过 --dbpath 来指定。
>`sudo mongod --dbpath=/data/db `

2、启动 mongodb，默认数据库目录即为 /data/db：
`sudo mongod`（相当于上文中`brew services start mongodb-community`）
我们可以把 MongoDB 的二进制命令文件目录（安装目录/bin）添加到 PATH 路径中：(相当于Windows的环境变量，brew安装的话可省略)
`export PATH=/usr/local/mongodb/bin:$PATH`
3、再打开一个终端进入执行以下命令：
```shell
$ mongo
MongoDB shell version v4.0.9
connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("3c12bf4f-695c-48b2-b160-8420110ccdcf") }
MongoDB server version: 4.0.9
……
> 1 + 1
2
> 
```
